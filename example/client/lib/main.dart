import 'dart:io';

import 'package:client/app.dart';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';
import 'package:http_proxy/http_proxy.dart';

// const kChatServerUrl = "http://192.168.10.50:51002";
const kChatServerUrl = 'https://message-ws-stg.kangfx.com/messagebroker';
// const kAccessToken =
//     'eyJhbGciOiJSUzI1NiIsImtpZCI6ImE3YzY1NzkyNjU2MDRhZDg5MmM4NmEwMWYzNzk2OTZlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE2Mzg4NDExNTIsImV4cCI6MTY0MDEzNzE1MiwiaXNzIjoiaHR0cHM6Ly9hcGktc3RnLmthbmdmeC5jb20vaWRlbnRpdHkiLCJhdWQiOlsiaHR0cHM6Ly9hcGktc3RnLmthbmdmeC5jb20vaWRlbnRpdHkvcmVzb3VyY2VzIiwiaWRlbnRpdHkiLCJpbSIsImRpY3Rpb25hcnkiLCJ2aXNpdCIsInRyYWluaW5nIiwicmVmZXJyYWwiLCJtZXNzYWdlIiwic2F0aXNmYWN0b3J5IiwiY2Fyb3VzZWwiLCJjb250ZW50IiwiZmlsZXNlcnZpY2UiXSwiY2xpZW50X2lkIjoiYjk0MmY2ZmMtMTViNS0xMWVhLTk1ODMtMDAwYzI5MDI2NzAwIiwic3ViIjoiZGY1OTU0ZTQtNjJjOC00MGE2LTg5OGQtODgwZGJkNWFkMzAwIiwiYXV0aF90aW1lIjoxNjM4ODQxMTUyLCJpZHAiOiJsb2NhbCIsIm9yZ2FuaXphdGlvbiI6Ilt7XCJpZFwiOlwiYTQ4NTNiNDItZWQxZi00NGFmLTg4YzQtOTVlNjM0NGFiMTVkXCIsXCJuYW1lXCI6XCLlm5vlt53lrp3nn7PoirHljLvpmaJcIixcImlzRGVmYXVsdFwiOlwiVHJ1ZVwiLFwiaXNBdXRob3JpemF0aW9uXCI6XCJGYWxzZVwifV0iLCJ1c2VyX25hbWUiOiJ3eHQwMDEiLCJuYW1lIjoi5LiH5bCP5am3MDAxIiwibmlja25hbWUiOiLkuIflsI_lqbcwMDEiLCJyb2xlIjoiZG9jdG9yIiwic2NvcGUiOlsib3BlbmlkIiwicHJvZmlsZSIsImlkZW50aXR5IiwiaW0iLCJkaWN0aW9uYXJ5IiwidmlzaXQiLCJ0cmFpbmluZyIsInJlZmVycmFsIiwiU01TIiwiUHVzaCIsIlNhdGlzZmFjdGlvbk1hbmFnZSIsImNhcm91c2VsIiwiY29udGVudCIsImZpbGVzZXJ2aWNlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.I7YQ0ipjnEPf9d6TmC6LLsPDpPxYDjBLJ-0IHXSYLIc84nL6uG3KJ3b79REIAlx4i0Hke9B8mWE840d-VapU4O93idbqIIwuelnR6epSwp7PSfVC1bScNWbai-WbO7m5Go0-Vtuih5sYzjsk_PsJyHR4ysfgQxP0nHm-w_1Cj8P9DzkOzQBG44WRipCuJuhqaIrI_ksrWL5c1ORrAUoZXSVnsLNfLJVh0sJhpVsV-eO64AzMJz7aiq9JeDLHlvtMpS0SDTZQlBBHWp4cNFeL6exqzFzsL0PLOyRXJvh23W5ZL7rukhlxhmSiMpipXN4Nkb8C_XdRO3SeFByz_LAWxg';

const kAccessToken =
    'eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMTgxZWQ5NzQwYzNiODk0YTcyZTcxODQwZmVlNzI4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE2ODM4NTgwOTEsImV4cCI6MTY4NTE1NDA5MSwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS1wbGF0LmthbmdmeC5jb20iLCJhdWQiOlsiaHR0cHM6Ly9pZGVudGl0eS1wbGF0LmthbmdmeC5jb20vcmVzb3VyY2VzIiwibWVzc2FnZSIsInNhdGlzZmFjdG9yeSIsImJmZiIsImJvb2siLCJjYXJvdXNlbCIsImNsb3VkaW5mcmEiLCJjb21tdW5pdHkiLCJjb25zdWx0IiwiY29udGVudCIsImRpY3Rpb25hcnkiLCJmaWxlc2VydmljZSIsImdlbmVyYXRvciIsImlkZW50aXR5IiwiaW0iLCJpbXYyIiwib3JkZXIiLCJyZWNvcmQiLCJyZWZlcnJhbCIsInN1cGVydmlzaW9uIiwidHJhaW5pbmciLCJ2aXNpdCJdLCJjbGllbnRfaWQiOiJiOTM1NDNiNS0xNWI1LTExZWEtOTU4My0wMDBjMjkwMjY3MDAiLCJzdWIiOiIzYTA5MzgyMy1mMWQ2LWU1NDgtMGNkYy0yMGE4NDJjYTJkMmEiLCJhdXRoX3RpbWUiOjE2ODM4NTgwOTEsImlkcCI6ImxvY2FsIiwib3JnYW5pemF0aW9uIjoiW3tcImlkXCI6XCJiYmRjYmMxNC0yOTBmLTQzZjYtOTFkOS1mZDMxNTI5ZGJlYzNcIixcIm5hbWVcIjpcIua1i-ivleWMu-mZolwiLFwiaXNEZWZhdWx0XCI6XCJUcnVlXCIsXCJpc0F1dGhvcml6YXRpb25cIjpcIkZhbHNlXCJ9XSIsInJvbGUiOiJhc3Npc3RhbnQiLCJ1c2VyX25hbWUiOiJjZXNoaTAwMDI1IiwibmFtZSI6IuWNk-iVvu-8iOWMu-eUn-WKqeaJi--8iSIsIm5pY2tuYW1lIjoiVXNlcl82M05LS09SOSIsInNjb3BlIjpbIm9wZW5pZCIsInByb2ZpbGUiLCJQdXNoIiwiU01TIiwiU2F0aXNmYWN0aW9uTWFuYWdlIiwiYmZmIiwiYm9vayIsImNhcm91c2VsIiwiY2xvdWRpbmZyYSIsImNvbW11bml0eSIsImNvbnN1bHQiLCJjb250ZW50IiwiZGljdGlvbmFyeSIsImZpbGVzZXJ2aWNlIiwiZ2VuZXJhdG9yIiwiaWRlbnRpdHkiLCJpbSIsImltdjIiLCJvcmRlciIsInJlY29yZCIsInJlZmVycmFsIiwic3VwZXJ2aXNpb24iLCJ0cmFpbmluZyIsInZpc2l0Iiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.cJ-rt_mVXxByO2YWJjajKhma3rq67fMT3lG4NjtVb1rr3MbcW_wjgBbbiIb4kysrt5U9kUqitsq9sHOdJnIEFVKOJ5ce_6ej2L9NVuE10ff3cOsFfazJ3Y92nBq3VmVUE8r66cFg5GWPjW7vdxTJCVQrYhOO3uBqYYRtigCNT8ZsxPSOra7SurDExOuoCkGFDoCSTdQSe3aER5G5utFrEq6NT1HJbzQEN7uF1SHnkILiiMRsWETCcRYehRDshxUqRjCdZSstLiSpwcgRJ0tM7644hRKzUebuhbBHVOG0xkbs6WkSjU8XQNLM_99jzvPyCjZK1ws1gJGWVoRsJ7XqPA';
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await configHttpProxy();
  runApp(const App());
}

Future<void> configHttpProxy() async {
  // 使用系统代理
  HttpProxy httpProxy = await HttpProxy.createHttpProxy();
  HttpOverrides.global = httpProxy;
  if (kDebugMode) {
    print('HTTP 代理：${httpProxy.host}:${httpProxy.port}');
  }
}
